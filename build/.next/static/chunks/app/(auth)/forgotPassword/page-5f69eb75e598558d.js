(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{2633:function(e,t,a){Promise.resolve().then(a.bind(a,3545))},3545:function(e,t,a){"use strict";a.r(t);var s=a(7437),o=a(2265),r=a(6463),n=a(4080);t.default=()=>{let[e,t]=(0,o.useState)(""),{forgotPassword:a}=(0,n.a)(),i=(0,r.useRouter)();async function c(s){s.preventDefault(),console.log(e),await a({email:e}),t(""),alert("Password reset link has been sent to your email"),i.push("/")}return(0,s.jsx)("div",{className:"hero bg-bas-300 w-full",children:(0,s.jsx)("form",{className:"card rounded w-96 ",onSubmit:c,children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsxs)("div",{className:"form-control",children:[(0,s.jsx)("label",{className:"label text-secondary",children:"Email"}),(0,s.jsx)("input",{className:"input input-sm input-bordered",type:"email",value:e,name:"email",placeholder:"Email",onChange:e=>t(e.target.value)})]}),(0,s.jsx)("div",{className:"form-control",children:(0,s.jsx)("button",{className:"btn btn-primary btn-sm btn-block",type:"submit",children:"Reset Password"})})]})})})}},4080:function(e,t,a){"use strict";a.d(t,{UsersProvider:function(){return u},a:function(){return l}});var s=a(7437),o=a(2265),r=a(7084),n=a(2126);let i=(0,o.createContext)(),c={user:{},isLoading:!1,error:{},isAuthenticated:!1,token:"",isAdmin:!1,isLoggedIn:!1,transaction:[],category:[],balance:0,premium:!1};function d(e,t){switch(t.type){case"isLoading":return{...e,isLoading:!0};case"isLoggedIn":return{...e,isLoggedIn:!0,isLoading:!1};case"isAdmin":return{...e,isAdmin:!0};case"isLoggedOut":return{...e,isLoggedIn:!1,isAuthenticated:!1,isAdmin:!1,user:{},transaction:[],token:"",isLoading:!1};case"getUserData":return{user:t.payload,isAuthenticated:!0,isLoggedIn:!0,isLoading:!1};case"rejected":return{...e,isLoading:!1,error:t.payload};case"getToken":return{...e,token:t.payload,isLoading:!1};case"getTransaction":return{...e,transaction:t.payload,isLoading:!1};case"storeUserData":return{...e,user:t.payload,isAuthenticated:!0,isLoggedIn:!0,isLoading:!1};case"getCategory":return{...e,category:t.payload,isLoading:!1};case"getBalance":return{...e,balance:t.payload,isLoading:!1};case"isAuthenticated":return{...e,isAuthenticated:!0,isLoggedIn:!0,isLoading:!1};case"isPremium":return{...e,premium:!0,isLoading:!1};default:return"unknown action type"}}function u(e){let{children:t}=e,[{user:a,isLoading:u,isLoggedIn:l,error:g,token:p,transaction:y,isAuthenticated:m,category:h,getBalance:f,balance:L,isPremium:b},k]=(0,o.useReducer)(d,c);async function v(e){k({type:"isLoading"});try{let t=await n.Z.post("http://localhost:3000/api/v1/users/signup",e);k({type:"getUserData",payload:t.data.data.user}),k({type:"getToken",payload:t.data.token}),k({type:"storeUserData",payload:t.data.data.user}),localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.data.user))}catch(e){k({type:"rejected",payload:e.response.data})}}async function S(e){k({type:"isLoading"});try{let t=await n.Z.post("http://localhost:3000/api/v1/users/login",e);k({type:"getUserData",payload:t.data.data.user}),k({type:"getToken",payload:t.data.token}),k({type:"storeUserData",payload:t.data.data.user}),localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.data.user))}catch(e){k({type:"rejected",payload:e.response.data})}}async function I(){try{k({type:"isLoading"}),delete r.Z.defaults.headers.common.Authorization,await r.Z.get("/api/v1/users/logout"),k({type:"isLoading",payload:!1}),k({type:"isLoggedOut"}),localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){k({type:"rejected",payload:e})}}async function j(e){try{k({type:"isLoading"}),"success"===e.status&&k({type:"isPremium"})}catch(e){k({type:"rejected",payload:g.response.data})}}async function w(e){try{k({type:"isLoading"});let t=await n.Z.post("http://localhost:3000/api/v1/users/forgotPassword",e);console.log(t),"success"===t.data.status?alert("Email has been sent to your email: ".concat(t.data.data.user.email)):alert("Failed to send reset email: ".concat(t.data.message))}catch(e){k({type:"rejected",payload:e})}}return(0,o.useEffect)(()=>{let e=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("user"));e&&t&&(k({type:"getToken",payload:e}),k({type:"storeUserData",payload:t}),k({type:"isLoggedIn"}))},[]),(0,o.useEffect)(()=>{async function e(){try{k({type:"isLoading"});let e=await r.Z.get("/api/v1/accounts/getAllCategories");k({type:"getCategory",payload:e.data.data})}catch(e){console.log(e)}}m&&e()},[m]),(0,s.jsx)(i.Provider,{value:{signup:v,login:S,isLoading:u,token:p,error:g,user:a,isLoggedIn:l,transaction:y,logout:I,category:h,balance:L,setPremium:j,forgotPassword:w},children:t})}let l=()=>{let e=(0,o.useContext)(i);if(void 0===e)throw Error("Unable to find context");return e}},7084:function(e,t,a){"use strict";let s=a(2126).Z.create({baseURL:"http://localhost:3000"});s.interceptors.request.use(e=>{let t=localStorage.getItem("token"),a=JSON.parse(localStorage.getItem("user"));return t&&a?e.headers.Authorization="Bearer ".concat(t):delete e.headers.Authorization,e},e=>Promise.reject(e)),t.Z=s},6463:function(e,t,a){"use strict";var s=a(1169);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[126,971,23,744],function(){return e(e.s=2633)}),_N_E=e.O()}]);